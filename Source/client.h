//==============================================================================
// タイトル     :   クライアントクラス
// ファイル名   :   client.h
// 作成者       :   AT13B284 21 数藤凌哉
// 作成日       :   2016/07/12
//==============================================================================

//==============================================================================
// 更新履歴: -2016/07/12 数藤凌哉
//           ・制作開始
//==============================================================================

//==============================================================================
// インクルードガード
//==============================================================================
#pragma once

//==============================================================================
// インクルードファイル
//==============================================================================
#include <WinSock2.h>
#include <WS2tcpip.h>
#include <Windows.h>
#include <process.h>

//==============================================================================
// ライブラリへのリンク設定
//==============================================================================
#pragma comment( lib , "ws2_32.lib" )		// WinSock用

//==============================================================================
// マクロ定義
//==============================================================================

//==============================================================================
// 構造体宣言
//==============================================================================

//==============================================================================
// クラス宣言
//==============================================================================
class CClient
{
	//---------------------------------------------
	// [ 構造体 ]
	//---------------------------------------------
public:

	//---------------------------------------------
	// [ メンバ関数 ]
	//---------------------------------------------
public:
	CClient();
	~CClient();

	static CClient* Create( void );

	virtual void Release( void );

	virtual bool Init( void );
	virtual void Uninit( void );

	void Send( void );
	void Recv();

	void Connect();

	static void SetFinishFlag( bool flags ){ m_isFinished = flags; }

protected:
	static unsigned int __stdcall mainLoop( void* obj );
	static bool GetFinishFlag(){ return m_isFinished; }

	//---------------------------------------------
	// [ メンバ変数 ]
	//---------------------------------------------
protected:
	WSADATA      m_wd;					// ウィンドウズソケットのデータ
	int          m_sock;				// ソケット
	SOCKADDR_IN  m_addr;				// アドレス

	unsigned int m_thID;				// スレッドID
	HANDLE       m_hTh;					// スレッドハンドル

	static bool m_isFinished;			// 終了フラグ
};

//==============================================================================
// プロトタイプ宣言
//==============================================================================
