//==============================================================================
// タイトル     :   DirectX用入力処理の中間クラス
// ファイル名   :   inputDX.cpp
// 作成者       :   AT13B284 21 数藤凌哉
// 作成日       :   2016/04/26
//==============================================================================

//==============================================================================
// 更新履歴: -2016/04/26 数藤凌哉
//           ・制作開始
//==============================================================================

//==============================================================================
// インクルードファイル
//==============================================================================
#include "input_DX.h"

//==============================================================================
// 列挙型宣言
//==============================================================================

//==============================================================================
// マクロ定義
//==============================================================================

//==============================================================================
// 構造体宣言
//==============================================================================

//==============================================================================
// プロトタイプ宣言
//==============================================================================

//==============================================================================
// グローバル宣言
//==============================================================================

//==============================================================================
// 静的変数
//==============================================================================
LPDIRECTINPUT8 CInputDX::m_pInput = NULL;
int            CInputDX::m_numDXInputInstance = 0;

//==============================================================================
// 関数名 : CInputDX()
// 引数   : void
// 戻り値 : void
// 説明   : デフォルトコンストラクタ
//==============================================================================
CInputDX::CInputDX()
{
	m_numDXInputInstance++;
}

//==============================================================================
// 関数名 : ~CInputDX()
// 引数   : void
// 戻り値 : void
// 説明   : デストラクタ
//==============================================================================
CInputDX::~CInputDX()
{

}

//==============================================================================
// 関数名 : bool CreateInputObject( HINSTANCE hInstance , HWND hWnd )
// 引数   : void
// 戻り値 : void
// 説明   : DirectInputのオブジェクト生成処理
//==============================================================================
bool CInputDX::CreateInputObject( HINSTANCE hInstance , HWND hWnd )
{
	if( m_pInput == NULL )
	{
		if( FAILED( DirectInput8Create(
						hInstance,
						DIRECTINPUT_VERSION,
						IID_IDirectInput8,
						( void** )&m_pInput,
						NULL ) ) )
		{
			return false;
		}
	}

	return true;
}

//==============================================================================
// 関数名 : void ReleaseInputObject( void )
// 引数   : void
// 戻り値 : void
// 説明   : DirectInputのオブジェクト解放処理
//==============================================================================
void CInputDX::ReleaseInputObject( void )
{
	m_numDXInputInstance--;

	if( m_pInput != NULL && m_numDXInputInstance == 0 )
	{
		if( m_pInput != NULL )
		{
			m_pInput->Release();
			m_pInput = NULL;
		}
	}
}
