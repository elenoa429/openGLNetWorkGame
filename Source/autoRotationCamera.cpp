//==============================================================================
// タイトル     :   自動回転カメラ
// ファイル名   :   autoRotationCamera.cpp
// 作成者       :   AT13B284 21 数藤凌哉
// 作成日       :   2016/12/13
//==============================================================================

//==============================================================================
// 更新履歴: -2016/12/13 数藤凌哉
//           ・制作開始
//==============================================================================

//==============================================================================
// インクルードファイル
//==============================================================================
#include "autoRotationCamera.h"
#include "rendererGL.h"

//==============================================================================
// 列挙型宣言
//==============================================================================

//==============================================================================
// マクロ定義
//==============================================================================

//==============================================================================
// 構造体宣言
//==============================================================================

//==============================================================================
// プロトタイプ宣言
//==============================================================================

//==============================================================================
// グローバル宣言
//==============================================================================

//==============================================================================
// 静的変数
//==============================================================================

//==============================================================================
// 関数名 : CAutoRotationCamera()
// 引数   : void
// 戻り値 : void
// 説明   : デフォルトコンストラクタ
//==============================================================================
CAutoRotationCamera::CAutoRotationCamera()
{
	m_rotMove = VECTOR3( 0.0f , 0.0f , 0.0f );
}

//==============================================================================
// 関数名 : ~CAutoRotationCamera()
// 引数   : void
// 戻り値 : void
// 説明   : デストラクタ
//==============================================================================
CAutoRotationCamera::~CAutoRotationCamera()
{
}

//==============================================================================
// 関数名 : bool Init( VECTOR3 posV , VECTOR3 posR )
// 引数   : void
// 戻り値 : void
// 説明   : 初期化処理
//==============================================================================
bool CAutoRotationCamera::Init( VECTOR3 posV , VECTOR3 posR )
{
	if( CCameraGL::Init( posV , posR ) == false )
	{
		return false;
	}

	// 仮埋め込み
	m_rotMove.y = PI * -0.00025f;

	return true;
}

//==============================================================================
// 関数名 : void Uninit( void )
// 引数   : void
// 戻り値 : void
// 説明   : 終了処理
//==============================================================================
void CAutoRotationCamera::Uninit( void )
{
	CCameraGL::Uninit();
}

//==============================================================================
// 関数名 : void Update( void )
// 引数   : void
// 戻り値 : void
// 説明   : 更新処理
//==============================================================================
void CAutoRotationCamera::Update( void )
{
	// 回転角更新・クランプ
	m_rot.y += m_rotMove.y;

	if( m_rot.y > PI )			m_rot.y += -PI2;
	else if( m_rot.y < -PI )	m_rot.y += PI2;

	m_posV.x = m_posR.x + sinf( m_rot.y ) * m_fDistance;
	m_posV.z = m_posR.z + cosf( m_rot.y ) * m_fDistance;

	CCameraGL::Update();
}
